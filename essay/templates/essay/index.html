{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Essay Synth</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/crispy-bootstrap5@1.13.0/dist/crispy-bootstrap5.min.css">

    <style>
        #loading-screen {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: white;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            text-align: center;  /* Center the content within the loading screen */
        }
    
        #countdown {
            font-size: 36px;
            font-weight: medium;
            color: #333;  /* Adjust the color to your preference */
            margin-bottom: 10px;
            font-family: monospace;
        }
    
        /* Animation for the dots */
        .dot-animation {
            display: inline-block;
            animation: dot-blink 1s infinite; /* Adjust the duration as needed */
        }
    
        @keyframes dot-blink {
            0%, 20%, 80%, 100% {
                opacity: 0;
            }
            40%, 60% {
                opacity: 1;
            }
        }
        .navbar-toggler
        {
            border: none;
            outline: none;
            float: right;
            position: relative;
            margin-left: 80%;
        }
        /* Custom CSS for the navbar-toggler-icon */
        .navbar-toggler-icon {
            background-color: transparent;
            border: none;
            display: inline-block;
            width: 1.5em;
            height: 1.5em;
            vertical-align: middle;
            position: relative;
            text-align: right;
        }

        .navbar-toggler-icon::before,
        .navbar-toggler-icon::after {
            content: '';
            background-color: none; /* Color of the three lines */
            width: 100%;
            height: 3px; /* Height of each line */
            position: absolute;
            left: 0;
            transition: transform 0.3s ease-out;
        }

        .navbar-toggler-icon::before {
            top: -0.5em;
        }

        .navbar-toggler-icon::after {
            bottom: -0.5em;
        }

        /* Rest of your styles */
        body {
            font-family: monospace;
        }

        .split {
            height: 100vh;
            width: 50%;
            position: fixed;
            z-index: 1;
            top: 0;
            overflow-x: hidden;
            padding-top: 20px;
        }

        .left {
            left: 0;
            background-color: #111;
            color: white;
        }

        .right {
            right: 0;
            background-color: white;
            color: black;
        }

        .centered {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: left;
        }

        .centered img {
            width: 150px;
            border-radius: 50%;
        }
        .navbar{
            font-size: larger;
            padding-top: 0%;
          }
        .nav-link{
          margin-left: 50px;
          font-size: larger;
        }
        .nav-link:hover {
          text-decoration: underline;
        }

        @media only screen and (max-width: 600px) {
          .left,
          .right {
              width: 50%;
          }
      }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-sm fixed-top navbar-light">
        <div class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar1">
                <!-- Hamburger icon with three black lines -->
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbar1">
                <ul class="navbar-nav ml-auto" style="text-align:right;">
                    <li class="nav-item active">
                        <a class="nav-link" href="{% url 'index'%}">Home</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="{% url 'faq'%}">FAQ</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="split left">
        <div class="centered">
            <h2 class="mb-4">Essay Synth: AI Collage Essay Analyzer</h2>
            <form method="post" action="{% url 'index' %}" class="crispy-form">
                {% csrf_token %}
                {{ form|crispy }}
                <button type="submit" class="btn btn-secondary mt-3">Submit</button>
            </form>
        </div>
    </div>





    <div class="split right">
        <div class="centered">
            {% if updated_title or updated_essay %}
                <div class="updated-section">
                    {% if updated_title %}
                        <h3 class="mt-4">Updated Essay Title:</h3>
                        <p style="overflow: auto;">{{ updated_title }}</p>
                    {% endif %}

                    {% if updated_essay %}
                        <h3 style="display: inline-block" class="mt-4">Updated Essay Content:</h3>
                        <textarea id="rewritecopy" style="padding: 20px;" cols="50" rows="10" minlength="600">{{ updated_essay }}</textarea>
                        <button style=" padding:5px; display:inline-block; text-decoration:none; color:black" class="btn btn-link">Copy</button>
                        <!-- <p style="overflow: auto;">{{ updated_essay }}</p> -->
                    {% endif %}
                </div>
            {% endif %}
        </div>
        <p class="foot" style="margin-top: 100%; text-align:center">
            &copy; Copyright 2021<script>new Date().getFullYear()>2017&&document.write("-"+new Date().getFullYear());</script>, Essay Synth.
        </p>
    </div>

    <div id="loading-screen">
        <center><div id="countdown">0</div></center>
        <div id="loading-message">Preparing for analysis</div>
        <div class="dot-animation">...</div>
    </div>
    
    


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/crispy-bootstrap5@1.13.0/dist/crispy-bootstrap5.min.js"></script>
    <script>

        $('button').on('click', () => {
            navigator.clipboard.writeText($('#rewritecopy').val());
          });
    </script>
<!-- Add this script to the existing <script> tag -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var countdownElement = document.getElementById('countdown');
            var loadingScreen = document.getElementById('loading-screen');
            var countdownValue = 0;
    
            function updateCountdown() {
                countdownElement.textContent = countdownValue;
                countdownValue++;
    
                if (countdownValue > 100) {
                    loadingScreen.style.display = 'none';
                } else {
                    setTimeout(updateCountdown, 1000);
    
                    // Update the loading message based on the progress
                    updateLoadingMessage(countdownValue);
                }
            }
    
            function updateLoadingMessage(progress) {
                var loadingMessageElement = document.getElementById('loading-message');
    
                if (progress < 25) {
                    loadingMessageElement.textContent = "Preparing data for AI analysis";
                } else if (progress < 50) {
                    loadingMessageElement.textContent = "Analyzing your content";
                } else if (progress < 75) {
                    loadingMessageElement.textContent = "Extracting meaningful insights using AI";
                } else {
                    loadingMessageElement.textContent = "Finalizing results";
                }
            }
    
            document.forms[0].addEventListener('submit', function () {
                loadingScreen.style.display = 'block';
                updateCountdown();
            });
        });
    </script>
</body>
<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="rahulmkashyap" data-description="Support me on Buy me a coffee!" data-message="Support this page?" data-color="#5F7FFF" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
</html>
